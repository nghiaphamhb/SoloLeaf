/* ========== Lucky Spin (Daily) ========== */
:root{
    --size: 420px;                               /* kích thước bánh */
    --rim: 10px;                                  /* độ dày viền bánh */
    --labelRadius: calc(var(--size)/2 - 70px);    /* khoảng cách chữ từ tâm */
    --c1:#FDE68A; --c2:#A7F3D0; --c3:#93C5FD; --c4:#FCA5A5;
}

.spin-wrap { display: grid; gap: 16px; }
.spin-head { display: grid; gap: 4px; }
.spin-title { font-size: 28px; font-weight: 800; margin: 0; }
.spin-sub { margin: 0; opacity: .8; }

.spin-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 20px;
}
@media (max-width: 980px){
    .spin-grid { grid-template-columns: 1fr; }
}

.spin-stage { display:grid; justify-items:center; gap:14px; }

/* Hộp cố định chứa bánh + mũi tên */
.spin-box{
    position: relative;
    width: var(--size);
    height: var(--size);
}

/* Bánh chiếm trọn hộp */
.spin-wheel{
    position: absolute;
    inset: 0;
    width: 95%;
    height: 95%;
    border-radius: 50%;
    border: 3px solid var(--accent);
    overflow: hidden;
    transition: transform .2s ease;
    font-size: clamp(12px, var(--size)/35, 16px); /* co chữ theo kích thước bánh */
}
/* Lớp bọc để phóng to/thu nhỏ khi hover */
.spin-zoom{
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    transition: transform .18s cubic-bezier(.2,.8,.2,1);
    transform-origin: center;
    will-change: transform;
}
/* Hover: phóng to nhẹ */
.spin-zoom:hover{
    transform: scale(1.06);
}
/* Bánh vẫn quay độc lập bên trong */
.spin-zoom .spin-wheel{
    position: relative;
    width: 95%;
    height: 95%;
}

/* Con trỏ: bám mép trên, chĩa xuống vào trong bánh */
.spin-pointer{
    position: absolute;
    left: 50%;
    top: 0;   /* ăn nhẹ vào bên trong; chỉnh 0–8px tùy ý */
    transform: translateX(-50%);
    width: 0; height: 0;

    border-left: 16px solid transparent;
    border-right: 16px solid transparent;
    border-top: 26px solid var(--brand-2); /* MUI TEN HƯỚNG XUỐNG */
    border-bottom: 0;

    filter: drop-shadow(0 2px 0 rgba(0,0,0,.2));
    z-index: 3;
    pointer-events: none;
}

/* Lát bánh + nhãn theo trục bán kính (từ tâm → rìa) */
.slice { position: absolute; inset: 0; }
/* Nhãn nằm theo trục bán kính: neo ở tâm (top-center) rồi đẩy ra ngoài */
.slice span{
    position: absolute;
    left: 50%;
    top: 50%;
    /* neo top-center đúng tại tâm bánh */
    transform-origin: top center;
    translate: -50% 0;

    writing-mode: vertical-rl;     /* chữ dọc: từ tâm ra rìa */
    text-orientation: mixed;
    white-space: nowrap;
    text-align: center;

    font-weight: 800;
    color: #111;
    font-size: 16px;
    line-height: 1;
    text-shadow: 0 1px 0 rgba(255,255,255,.35);

    /* cắt bớt nếu text quá dài (bảo vệ layout khi đổ API) */
    max-height: calc(var(--size)/2 - 20px);
    overflow: hidden;
}

/*.slice.flip span { transform: rotate(var(--ang)) translateY(calc(-1*var(--labelRadius))) rotate(180deg); }*/
@media (max-width: 640px){ :root{ --size: 340px; --labelRadius: calc(var(--size)/2 - 56px); } } /* Responsive bán kính chữ */

/* Màu nền cho từng lát bằng conic-gradient */
.s0 { background: conic-gradient(var(--c1) 0 45deg,  transparent 45deg); }
.s1 { background: conic-gradient(transparent 0 45deg, var(--c2) 45deg 90deg,  transparent 90deg); }
.s2 { background: conic-gradient(transparent 0 90deg, var(--c3) 90deg 135deg, transparent 135deg); }
.s3 { background: conic-gradient(transparent 0 135deg, var(--c4) 135deg 180deg, transparent 180deg); }
.s4 { background: conic-gradient(transparent 0 180deg, var(--c1) 180deg 225deg, transparent 225deg); }
.s5 { background: conic-gradient(transparent 0 225deg, var(--c2) 225deg 270deg, transparent 270deg); }
.s6 { background: conic-gradient(transparent 0 270deg, var(--c3) 270deg 315deg, transparent 315deg); }
.s7 { background: conic-gradient(transparent 0 315deg, var(--c4) 315deg 360deg); }

/* Góc trung tâm từng lát + đẩy ra đúng bán kính */
.s0 span { transform: rotate(22.5deg)  translateY(calc(-1 * var(--labelRadius))); }
.s1 span { transform: rotate(67.5deg)  translateY(calc(-1 * var(--labelRadius))); }
.s2 span { transform: rotate(112.5deg) translateY(calc(-1 * var(--labelRadius))); }
.s3 span { transform: rotate(157.5deg) translateY(calc(-1 * var(--labelRadius))); }
.s4 span { transform: rotate(202.5deg) translateY(calc(-1 * var(--labelRadius))); }
.s5 span { transform: rotate(247.5deg) translateY(calc(-1 * var(--labelRadius))); }
.s6 span { transform: rotate(292.5deg) translateY(calc(-1 * var(--labelRadius))); }
.s7 span { transform: rotate(337.5deg) translateY(calc(-1 * var(--labelRadius))); }

/* Nút quay */
.spin-btn {
    display: inline-flex; align-items: center; justify-content: center;
    min-width: 160px; height: 44px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: var(--brand-2); color: #fff;
    font-weight: 800; letter-spacing: .2px;
    box-shadow: var(--shadow-sm, 0 2px 8px rgba(0,0,0,.08));
    transition: transform .2s var(--ease, ease), box-shadow .2s var(--ease, ease), background-color .2s var(--ease, ease);
}
.spin-btn.small { height: 40px; min-width: 120px; }
.spin-btn:disabled { filter: grayscale(70%); cursor: not-allowed; opacity: .7; }
.spin-btn:hover{ background: var(--accent, #ef7d00); transform: translateY(-1px); box-shadow: var(--shadow-md, 0 6px 18px rgba(0,0,0,.12)); }
.spin-btn:active{ transform: translateY(0); box-shadow: var(--shadow-sm, 0 2px 8px rgba(0,0,0,.08)); }
.spin-btn:focus-visible{ outline: 2px solid var(--ring); outline-offset: 3px; }

/* Phụ trợ */
.spin-ghost {
    height: 36px; padding: 0 12px; border-radius: 10px;
    background: transparent; color: inherit; border: 1px solid rgba(255,255,255,.2);
    cursor: pointer;
}
.spin-ghost.danger { border-color: rgba(255,0,0,.35); color: #ffb3b3; }

.spin-note { opacity: .8; }

.spin-side { display: grid; gap: 16px; }
.spin-card{
    display: grid;
    grid-template-rows: auto minmax(0,1fr) auto;
    max-height: min(60vh, 460px); /* giới hạn tổng chiều cao card */
}
/* Khu danh sách mã: cho phép cuộn dọc */
.spin-card .coupon-list{
    overflow-y: auto;
    max-height: 100%;    /* chiếm hết hàng giữa của grid */
    padding-right: 4px;  /* chừa chỗ cho scrollbar */
}

/* Scrollbar gọn gàng (Chrome/Edge/WebKit) */
.spin-card .coupon-list::-webkit-scrollbar{ width: 8px; }
.spin-card .coupon-list::-webkit-scrollbar-thumb{
    background: rgba(255,255,255,.2);
    border-radius: 8px;
}
.spin-card .coupon-list::-webkit-scrollbar-track{
    background: transparent;
}

.spin-rules { margin: 8px 0 0; padding-left: 18px; opacity: .9; }
.spin-rules li { margin-bottom: 6px; }

/* Modal */
.spin-modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,.55); z-index: 80; }
.spin-modal.show { display: grid; }
.spin-modal__dialog {
    width: min(480px, 92vw); background: #15171d; border: 1px solid rgba(255,255,255,.08);
    border-radius: 14px; padding: 16px;
}
.spin-modal__close { float:right; border:none; background:transparent; color:#aaa; cursor:pointer; }
.spin-modal__body { padding: 6px 4px 10px; text-align: center; }
.prize-box { display: grid; gap: 10px; margin-top: 8px; }
.prize-main { font-size: 22px; font-weight: 800; }
.prize-code { display: inline-flex; gap: 8px; align-items: center; justify-content: center; }
.prize-meta { opacity: .85; font-size: 14px; }
.spin-modal__actions { margin-top: 12px; display: flex; gap: 10px; justify-content: center; }

/* Responsive: trên mobile hạ giới hạn để khỏi tràn màn hình */
@media (max-width: 980px){
    .spin-card{ max-height: 50vh; }
}