/* ========== Lucky Spin (Daily) ========== */
:root{
    --size: 420px;                               /* kích thước bánh */
    --rim: 10px;                                  /* độ dày viền bánh */
    --labelRadius: calc(var(--size)/2 - 70px);    /* khoảng cách chữ từ tâm */
    --c1:#FDE68A; --c2:#A7F3D0; --c3:#93C5FD; --c4:#FCA5A5;
}

.spin-wrap { display: grid; gap: 16px; }
.spin-head { display: grid; gap: 4px; }
.spin-title { font-size: 28px; font-weight: 800; margin: 0; }
.spin-sub { margin: 0; opacity: .8; }

.spin-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 20px;
}
@media (max-width: 980px){
    .spin-grid { grid-template-columns: 1fr; }
}

.spin-stage { display:grid; justify-items:center; gap:14px; }

/* Hộp cố định chứa bánh + mũi tên */
.spin-box{
    position: relative;
    width: var(--size);
    height: var(--size);
}

/* Bánh chiếm trọn hộp */
.spin-wheel{
    position: absolute;
    inset: 0;
    width: 95%;
    height: 95%;
    border-radius: 50%;
    border: 3px solid var(--accent);
    overflow: hidden;
    transition: transform .2s ease;
    font-size: clamp(12px, var(--size)/35, 16px); /* co chữ theo kích thước bánh */
}
/* Lớp bọc để phóng to/thu nhỏ khi hover */
.spin-zoom{
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    transition: transform .18s cubic-bezier(.2,.8,.2,1);
    transform-origin: center;
    will-change: transform;
}
/* Hover: phóng to nhẹ */
.spin-zoom:hover{
    transform: scale(1.06);
}
/* Bánh vẫn quay độc lập bên trong */
.spin-zoom .spin-wheel{
    position: relative;
    width: 95%;
    height: 95%;
}

/* Con trỏ: bám mép trên, chĩa xuống vào trong bánh */
.spin-pointer{
    position: absolute;
    left: 50%;
    top: 0;   /* ăn nhẹ vào bên trong; chỉnh 0–8px tùy ý */
    transform: translateX(-50%);
    width: 0; height: 0;

    border-left: 16px solid transparent;
    border-right: 16px solid transparent;
    border-top: 26px solid var(--brand-2); /* MUI TEN HƯỚNG XUỐNG */
    border-bottom: 0;

    filter: drop-shadow(0 2px 0 rgba(0,0,0,.2));
    z-index: 3;
    pointer-events: none;
}

/* Mỗi lát nhận góc & màu qua biến CSS */
.slice{
    position: absolute; inset: 0;
    --start: 0deg; --end: 45deg; --ang: 22.5deg; --bg: #FDE68A;
    background: conic-gradient(transparent 0 var(--start),
    var(--bg) var(--start) var(--end),
    transparent var(--end));
}
.slice span{
    position: absolute; left: 50%; top: 50%;
    transform-origin: top center;
    translate: -50% 0;
    writing-mode: vertical-rl; text-orientation: mixed; white-space: nowrap;
    font-weight: 800; color: #111; font-size: 16px; line-height: 1;
    transform: rotate(var(--ang)) translateY(calc(-1 * var(--labelRadius)));
}
/* Tuỳ chọn: lật chữ ở nửa dưới (đỡ ngược) */
.slice.flip span{
    transform: rotate(var(--ang)) translateY(calc(-1 * var(--labelRadius))) rotate(180deg);
}

@media (max-width: 640px){ :root{ --size: 340px; --labelRadius: calc(var(--size)/2 - 56px); } } /* Responsive bán kính chữ */


/* Nút quay */
.spin-btn {
    display: inline-flex; align-items: center; justify-content: center;
    min-width: 160px; height: 44px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: var(--brand-2); color: #fff;
    font-weight: 800; letter-spacing: .2px;
    box-shadow: var(--shadow-sm, 0 2px 8px rgba(0,0,0,.08));
    transition: transform .2s var(--ease, ease), box-shadow .2s var(--ease, ease), background-color .2s var(--ease, ease);
}
.spin-btn.small { height: 40px; min-width: 120px; }
.spin-btn:disabled { filter: grayscale(70%); cursor: not-allowed; opacity: .7; }
.spin-btn:hover{ background: var(--accent, #ef7d00); transform: translateY(-0.5px); box-shadow: var(--shadow-md, 0 6px 10px rgba(0,0,0,.12)); }
.spin-btn:active{ transform: translateY(0); box-shadow: var(--shadow-sm, 0 2px 8px rgba(0,0,0,.08)); }
.spin-btn:focus-visible{ outline: 2px solid var(--ring); outline-offset: 3px; }

/* Phụ trợ */
.spin-ghost {
    height: 36px; padding: 0 12px; border-radius: 10px;
    background: transparent; color: inherit; border: 1px solid rgba(255,255,255,.2);
    cursor: pointer;
}
.spin-ghost.danger { border-color: rgba(255,0,0,.35); color: #ffb3b3; }

.spin-note { opacity: .8; }

.spin-side { display: grid; gap: 16px; }
.spin-card{
    display: grid;
    grid-template-rows: auto minmax(0,1fr) auto;
    max-height: min(60vh, 460px); /* giới hạn tổng chiều cao card */
}
/* Khu danh sách mã: cho phép cuộn dọc */
.spin-card .coupon-list{
    overflow-y: auto;
    max-height: 100%;    /* chiếm hết hàng giữa của grid */
    padding-right: 4px;  /* chừa chỗ cho scrollbar */
}

/* Scrollbar gọn gàng (Chrome/Edge/WebKit) */
.spin-card .coupon-list::-webkit-scrollbar{ width: 8px; }
.spin-card .coupon-list::-webkit-scrollbar-thumb{
    background: rgba(255,255,255,.2);
    border-radius: 8px;
}
.spin-card .coupon-list::-webkit-scrollbar-track{
    background: transparent;
}

.spin-rules { margin: 8px 0 0; padding-left: 18px; opacity: .9; }
.spin-rules li { margin-bottom: 6px; }

/* Modal */
.spin-modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,.55); z-index: 80; }
.spin-modal.show { display: grid; }
.spin-modal__dialog {
    width: min(480px, 92vw);
    background: var(--bg);
    border: 3px solid var(--brand-2);
    border-radius: 14px; padding: 16px;
}
.spin-modal__close { float:right; border:none; background:transparent; color:#aaa; cursor:pointer; }
.spin-modal__body { padding: 6px 4px 10px; text-align: center; }
.prize-box { display: grid; gap: 10px; margin-top: 8px; }
.prize-main { font-size: 22px; font-weight: 800; }
.prize-code { display: inline-flex; gap: 8px; align-items: center; justify-content: center; }
.prize-meta { opacity: .85; font-size: 14px; }
.spin-modal__actions { margin-top: 12px; display: flex; gap: 10px; justify-content: center; }

/* Responsive: trên mobile hạ giới hạn để khỏi tràn màn hình */
@media (max-width: 980px){
    .spin-card{ max-height: 50vh; }
}